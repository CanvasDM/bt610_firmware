# Laird Connectivity BT6 mcuboot configuration
# Enables CC310 with ECDSA-p256 and no debugging
CONFIG_BOOT_VALIDATE_SLOT0=y

CONFIG_SIZE_OPTIMIZATIONS=y

CONFIG_CONSOLE_HANDLER=n
CONFIG_DEBUG=n
CONFIG_SYSTEM_CLOCK_DISABLE=y
CONFIG_SYS_POWER_MANAGEMENT=n

CONFIG_MAIN_STACK_SIZE=10240

# Do not erase all flash when flashing mcuboot
CONFIG_ZEPHYR_TRY_MASS_ERASE=n

### Default to ECDSA
CONFIG_BOOT_SIGNATURE_TYPE_ECDSA_P256=y
CONFIG_BOOT_ECDSA_CC310=y
CONFIG_BOOT_SIGNATURE_KEY_FILE="root-ec-p256.pem"
CONFIG_ENTROPY_CC3XX=y
CONFIG_NRF_CC310_BL=y

### We never want Zephyr's copy of tinycrypt.  If tinycrypt is needed,
### MCUboot has its own copy in tree.
# CONFIG_TINYCRYPT is not set
# CONFIG_TINYCRYPT_ECC_DSA is not set
# CONFIG_TINYCRYPT_SHA256 is not set

CONFIG_FLASH=y

# nrf52840 with QSPI
CONFIG_MULTITHREADING=y
CONFIG_NORDIC_QSPI_NOR=y
CONFIG_NORDIC_QSPI_NOR_FLASH_LAYOUT_PAGE_SIZE=4096
CONFIG_NORDIC_QSPI_NOR_STACK_WRITE_BUFFER_SIZE=16
CONFIG_BOOT_MAX_IMG_SECTORS=256
CONFIG_MPU_ALLOW_FLASH_WRITE=y
CONFIG_PM_EXTERNAL_FLASH=y
CONFIG_PM_EXTERNAL_FLASH_DEV_NAME="MX25R64"
CONFIG_PM_EXTERNAL_FLASH_SIZE=0x800000
CONFIG_PM_EXTERNAL_FLASH_BASE=0

### Various Zephyr boards enable features that we don't want.
# CONFIG_BT is not set
# CONFIG_BT_CTLR is not set
# CONFIG_I2C is not set

#CONFIG_LOG=y
#CONFIG_MCUBOOT_SERIAL=y
#CONFIG_BOOT_SERIAL_UART=y
#CONFIG_BOOT_SERIAL_DETECT_PIN=24
#CONFIG_BOOT_SERIAL_DETECT_PIN_VAL=0
#CONFIG_UART_CONSOLE=n
#CONFIG_CONSOLE_HANDLER=n
#CONFIG_USE_SEGGER_RTT=y
#CONFIG_RTT_CONSOLE=y

CONFIG_PM_PARTITION_SIZE_MCUBOOT=0xC000
CONFIG_PM_PARTITION_SIZE_MCUBOOT_SCRATCH=0x4000
CONFIG_BOOT_SWAP_USING_MOVE=y
CONFIG_BOOT_BANNER=n
CONFIG_SERIAL=n
CONFIG_CONSOLE=n
CONFIG_STDOUT_CONSOLE=n
CONFIG_PRINTK=n
CONFIG_EARLY_CONSOLE=n
CONFIG_ASSERT_VERBOSE=n
